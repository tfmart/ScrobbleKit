{"sections":[],"metadata":{"role":"article","modules":[{"name":"ScrobbleKit"}],"title":"Authenticating an User","roleHeading":"Article"},"abstract":[{"text":"For services requiring authentication, discover how to sign in with a Last.fm account using ScrobbleKit.","type":"text"}],"kind":"article","identifier":{"url":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/Authentication","interfaceLanguage":"swift"},"seeAlsoSections":[{"identifiers":["doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKSessionResponseInfo","doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKManager\/startSession(username:password:)","doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKManager\/setSessionKey(_:)"],"title":"Authenticating an User","generated":true}],"schemaVersion":{"major":0,"minor":3,"patch":0},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/scrobblekit\/authentication"]}],"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","type":"heading","level":2,"anchor":"Overview"},{"inlineContent":[{"type":"text","text":"Certain ScrobbleKit services, such as scrobbling a song to a Last.fm profile, necessitate authentication from a valid Last.fm account. To perform these actions, a valid token generated by Last.fm is required, and ScrobbleKit can assist in generating one."}],"type":"paragraph"},{"level":3,"type":"heading","anchor":"Generating-a-Session-Token","text":"Generating a Session Token"},{"inlineContent":[{"type":"text","text":"Use the "},{"type":"reference","identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKManager\/startSession(username:password:)","isActive":true},{"text":" method to create a new token by providing the Last.fm account’s username and password.","type":"text"}],"type":"paragraph"},{"type":"aside","content":[{"inlineContent":[{"text":"Last.fm’s API does not support authentication via email; you must provide the account’s username under the ","type":"text"},{"type":"codeVoice","code":"username"},{"text":" parameter.","type":"text"}],"type":"paragraph"}],"style":"important","name":"Important"},{"syntax":"swift","code":["let manager = SBKManager(apiKey: API_KEY, secret: SECRET_KEY)","","do {","    try await manager.startSession(username: USERNAME, password: PASSWORD)","} catch {","    \/\/ Handle sign-in error","}"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"text":"Upon successful authentication, the ","type":"text"},{"type":"reference","identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKManager","isActive":true},{"type":"text","text":" instance will automatically set the generated token for subsequent requests. However, it is recommended that your application securely stores the generated token, allowing it to access authenticated services without requiring users to repeatedly authenticate with their Last.fm account."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Retrieve the session token from the "},{"identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKSessionResponseInfo","type":"reference","isActive":true},{"type":"text","text":" instance returned by the "},{"type":"reference","identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKManager\/startSession(username:password:)","isActive":true},{"type":"text","text":" method, using the "},{"isActive":true,"type":"reference","identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKSessionResponseInfo\/key"},{"text":" property:","type":"text"}]},{"code":["do {","    let response = try await manager.startSession(username: USERNAME, secret: PASSWORD)","    let token = response.key","} catch {","    \/\/ Handle error","}"],"type":"codeListing","syntax":"swift"},{"anchor":"Using-an-Existing-Session-Token","level":3,"type":"heading","text":"Using an Existing Session Token"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you already have a valid session token, provide it to the "},{"type":"reference","identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKManager\/setSessionKey(_:)","isActive":true},{"text":" method:","type":"text"}]},{"syntax":"swift","code":["manager.setSessionKey(SESSION_KEY)"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This action also saves the session token to the manager instance for future çuse"}]}]}],"hierarchy":{"paths":[["doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit"]]},"references":{"doc://ScrobbleKit/documentation/ScrobbleKit":{"type":"topic","url":"\/documentation\/scrobblekit","kind":"symbol","abstract":[{"type":"text","text":"Streamlined interaction with Last.fm on Apple platforms"}],"role":"collection","identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit","title":"ScrobbleKit"},"doc://ScrobbleKit/documentation/ScrobbleKit/SBKSessionResponseInfo":{"abstract":[{"type":"text","text":"Represents the information retrieved after a successful authentication with Last.fm services."}],"fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"SBKSessionResponseInfo"}],"role":"symbol","url":"\/documentation\/scrobblekit\/sbksessionresponseinfo","title":"SBKSessionResponseInfo","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SBKSessionResponseInfo"}],"identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKSessionResponseInfo"},"doc://ScrobbleKit/documentation/ScrobbleKit/SBKManager/setSessionKey(_:)":{"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"setSessionKey","kind":"identifier"},{"kind":"text","text":"("},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":")","kind":"text"}],"title":"setSessionKey(_:)","identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKManager\/setSessionKey(_:)","type":"topic","url":"\/documentation\/scrobblekit\/sbkmanager\/setsessionkey(_:)","kind":"symbol","role":"symbol","abstract":[{"type":"text","text":"Sets the session key for authenticated requests."}]},"doc://ScrobbleKit/documentation/ScrobbleKit/SBKManager/startSession(username:password:)":{"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"startSession"},{"text":"(","kind":"text"},{"text":"username","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":", ","kind":"text"},{"text":"password","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":") "},{"text":"async","kind":"keyword"},{"kind":"text","text":" "},{"text":"throws","kind":"keyword"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"SBKSessionResponseInfo","preciseIdentifier":"s:11ScrobbleKit22SBKSessionResponseInfoC"}],"title":"startSession(username:password:)","identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKManager\/startSession(username:password:)","type":"topic","url":"\/documentation\/scrobblekit\/sbkmanager\/startsession(username:password:)","kind":"symbol","role":"symbol","abstract":[{"type":"text","text":"Starts a new session with Last.fm using the provided credentials."}]},"doc://ScrobbleKit/documentation/ScrobbleKit/SBKManager":{"fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"text":"SBKManager","kind":"identifier"}],"title":"SBKManager","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SBKManager"}],"url":"\/documentation\/scrobblekit\/sbkmanager","kind":"symbol","role":"symbol","abstract":[{"text":"The main class for interacting with the Last.fm API.","type":"text"}],"identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKManager"},"doc://ScrobbleKit/documentation/ScrobbleKit/SBKSessionResponseInfo/key":{"fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"text":"key","kind":"identifier"},{"kind":"text","text":": "},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"}],"title":"key","identifier":"doc:\/\/ScrobbleKit\/documentation\/ScrobbleKit\/SBKSessionResponseInfo\/key","type":"topic","url":"\/documentation\/scrobblekit\/sbksessionresponseinfo\/key","kind":"symbol","role":"symbol","abstract":[{"type":"text","text":"The session token generated for the current user session."}]}}}